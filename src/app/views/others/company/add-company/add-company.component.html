<mat-card class="p-0">
  <mat-card-title class="">
    <div class="card-title-text">{{title}} Company</div>
    <mat-divider></mat-divider>
  </mat-card-title>
  <mat-card-content>
    <div class="example-loading-shade" *ngIf="isLoadingResults">
      <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    </div>
    <mat-horizontal-stepper [linear]="true">
      <mat-step [stepControl]="firstFormGroup">
        <form [formGroup]="firstFormGroup">
          <ng-template matStepLabel>Company information</ng-template>
          <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Company Name" type="text" minlength="3" maxlength="30" formControlName="companyName"
                required>
              <mat-error *ngIf="companyName.invalid && (companyName.dirty || companyName.touched)" class="alert alert-danger">
                <mat-error *ngIf="companyName.errors.required">
                  Company name is required.
                </mat-error>
                <mat-error *ngIf="companyName.errors.minlength">
                  Company name must be at least 3 characters long.
                </mat-error>
              </mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Email Id" type="text" minlength="5" maxlength="40" formControlName="email"
                required>
              <mat-error *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
                <mat-error *ngIf="email.errors.required">
                  Email id is required.
                </mat-error>
                <!-- <mat-error *ngIf="email.errors.email">
                  Please enter valid mail.
                </mat-error> -->
              </mat-error>
            </mat-form-field>
          </div>
          <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <input matInput placeholder="Company Prefix" type="text" maxlength="30" formControlName="companyCode"
                required>
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <input matInput placeholder="Contact No" type="text" minlength="3" maxlength="15" formControlName="contactNo"
                required>
              <mat-error *ngIf="contactNo.invalid && (contactNo.dirty || contactNo.touched)" class="alert alert-danger">
                <mat-error *ngIf="contactNo.errors.required">
                  Contact number is required.
                </mat-error>
              </mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <input matInput placeholder="Alternate contact no" maxlength="15" type="text" formControlName="phoneNo">
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <input matInput placeholder="Fax" type="text" maxlength="30" formControlName="fax">
            </mat-form-field>

          </div>
          <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Address Line 1" type="text" maxlength="80" formControlName="addressOne">
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Address Line 2" type="text" maxlength="80" formControlName="addressTwo">
            </mat-form-field>
          </div>
          <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <input matInput placeholder="City" type="text" maxlength="30" formControlName="city">
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="22">
              <input matInput placeholder="Postal code" type="text" maxlength="10" formControlName="postalCode">
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <mat-select placeholder="Select Country" name="country" formControlName="country" (selectionChange)="onSelect($event.value)">
                <mat-option>None</mat-option>
                <mat-option *ngFor="let obj of countries" [value]="obj">
                  {{ obj }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="22">
              <mat-select placeholder="Select State" name="province" formControlName="state">
                <mat-option>None</mat-option>
                <mat-option *ngFor="let obj of states" [value]="obj.name">
                  {{ obj.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div>
            <button mat-raised-button color="primary" matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="secondFormGroup">
        <form [formGroup]="secondFormGroup">
          <ng-template matStepLabel>User information</ng-template>
          <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Username" type="text" minlength="3" maxlength="30" formControlName="username"
                required>
              <mat-error *ngIf="username.invalid && (username.dirty || username.touched)" class="alert alert-danger">
                <mat-error *ngIf="username.errors.required">
                  Username is required.
                </mat-error>
                <mat-error *ngIf="username.errors.minlength">
                  Username must be at least 3 characters long.
                </mat-error>
              </mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Email Id" type="text" minlength="5" maxlength="40" formControlName="email"
                required>
              <mat-error *ngIf="useremail.invalid && (useremail.dirty || useremail.touched)" class="alert alert-danger">
                <mat-error *ngIf="useremail.errors.required">
                  Email id is required.
                </mat-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Full Name" type="text" minlength="3" maxlength="30" formControlName="name"
                required>
              <mat-error *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
                <mat-error *ngIf="name.errors.required">
                  Username is required.
                </mat-error>
                <mat-error *ngIf="name.errors.minlength">
                  Username must be at least 3 characters long.
                </mat-error>
              </mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <input matInput placeholder="Contact No" type="text" minlength="3" maxlength="15" formControlName="contact"
                required>
              <mat-error *ngIf="contact.invalid && (contact.dirty || contact.touched)" class="alert alert-danger">
                <mat-error *ngIf="contact.errors.required">
                  Contact number is required.
                </mat-error>
              </mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <input matInput placeholder="Alternate contact no" maxlength="15" type="text" formControlName="alternatecontact">
            </mat-form-field>
          </div>
          <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Address Line 1" type="text" maxlength="80" formControlName="streetno">
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="48.50">
              <input matInput placeholder="Address Line 2" type="text" maxlength="80" formControlName="streetname">
            </mat-form-field>
          </div>
          <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <input matInput placeholder="City" type="text" maxlength="30" formControlName="city">
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="22">
              <input matInput placeholder="Postal code" type="text" maxlength="10" formControlName="postalcode">
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="23">
              <mat-select placeholder="Select Country" name="country" formControlName="country" (selectionChange)="onUserSelect($event.value)">
                <mat-option>None</mat-option>
                <mat-option *ngFor="let obj of countries" [value]="obj">
                  {{ obj}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field fxFlex="100" fxFlex.gt-xs="22">
              <mat-select placeholder="Select State" name="province" formControlName="state">
                <mat-option>None</mat-option>
                <mat-option *ngFor="let obj of userstates" [value]="obj.name">
                  {{ obj.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div>
            <button mat-raised-button color="accent" matStepperPrevious class="mr-1">Back</button>
            <button mat-raised-button color="primary" matStepperNext (click)="submit()">Submit & Next</button>
          </div>
        </form>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Upload Logo</ng-template>
        <div fxLayout="row" fxLayoutWrap="wrap">
          <div fxFlex="100" fxFlex.gt-md="60" ngClass.gt-md="pr-1">
            <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
              <mat-form-field fxFlex="100" fxFlex.gt-xs="90">
                <input matInput #file2 placeholder="Upload company logo" class="pointer--cursor" (click)="upload2.click()">
                <input [hidden]="true" type="file" #upload2 (change)="uploadFile($event, file2)" />
              </mat-form-field>
              <button type="button" mat-button color="accent" mat-mini-fab (click)="upload2.click()" matTooltip="Choose image">
                <mat-icon>attachment</mat-icon>
              </button>
            </div>
          </div>
          <div fxFlex="100" fxFlex.gt-md="5" ngClass.gt-md="pr-1">
          </div>
          <div fxFlex="100" fxFlex.gt-md="35" ngClass.gt-md="pr-1">
            <div class="profile__pic" fxFlex="100" fxFlex.gt-xs="24">
              <img [src]="url" alt="Company Logo" class="user">
            </div>
            <br>
          </div>
        </div>
        <br />
        <div fxLayout="row" fxLayoutWrap="wrap">
          <div fxFlex="100" fxFlex.gt-md="60" ngClass.gt-md="pr-1">
            <div fxLayoutAlign.gt-xs="space-between start" fxLayout.xs="column">
              <mat-form-field fxFlex="100" fxFlex.gt-xs="90">
                <input matInput #file3 placeholder="Upload user logo" class="pointer--cursor" (click)="upload3.click()">
                <input [hidden]="true" type="file" #upload3 (change)="uploadUserLogo($event, file3)" />
              </mat-form-field>
              <button type="button" mat-button color="accent" mat-mini-fab (click)="upload3.click()" matTooltip="Choose userlogo">
                <mat-icon>attachment</mat-icon>
              </button>
            </div>
          </div>
          <div fxFlex="100" fxFlex.gt-md="5" ngClass.gt-md="pr-1">
          </div>
          <div fxFlex="100" fxFlex.gt-md="35" ngClass.gt-md="pr-1">
            <div class="profile__pic" fxFlex="100" fxFlex.gt-xs="24">
              <img [src]="url2" alt="User Logo" class="user">
            </div>
            <br>
          </div>
        </div>
        <div class="pb-1 mb-1"> You Are Done.</div>
        <div>
          <button mat-raised-button color="accent" matStepperPrevious class="mr-1">Back</button>
          <button mat-raised-button color="primary" (click)="finalSubmit()">Submit</button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </mat-card-content>
</mat-card>